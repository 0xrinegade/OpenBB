"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[61568],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),c=p(n),m=i,h=c["".concat(l,".").concat(m)]||c[m]||u[m]||r;return n?a.createElement(h,o(o({ref:t},d),{},{components:n})):a.createElement(h,o({ref:t},d))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:i,o[1]=s;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},88828:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(67294),i=n(35742);function r(e){let{title:t}=e;return a.createElement(i.Z,null,a.createElement("title",null,t))}},3398:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var a=n(87462),i=(n(67294),n(3905)),r=n(88828);const o={sidebar_position:4,title:"Scripts & Routines",description:"Learn how to set up and maintain scripts and routines in the OpenBB Terminal. These operations will help automate processes and repetitive tasks to save time and effort.",keywords:["scripts","routines",".do file","stata","spss","r studio","python","automation","data collection","aggregation","script","routine","openbb terminal","tasks","processes"]},s=void 0,l={unversionedId:"terminal/usage/guides/scripts-and-routines",id:"terminal/usage/guides/scripts-and-routines",title:"Scripts & Routines",description:"Learn how to set up and maintain scripts and routines in the OpenBB Terminal. These operations will help automate processes and repetitive tasks to save time and effort.",source:"@site/content/terminal/usage/guides/scripts-and-routines.md",sourceDirName:"terminal/usage/guides",slug:"/terminal/usage/guides/scripts-and-routines",permalink:"/terminal/usage/guides/scripts-and-routines",draft:!1,editUrl:"https://github.com/OpenBB-finance/OpenBBTerminal/edit/main/website/content/terminal/usage/guides/scripts-and-routines.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,title:"Scripts & Routines",description:"Learn how to set up and maintain scripts and routines in the OpenBB Terminal. These operations will help automate processes and repetitive tasks to save time and effort.",keywords:["scripts","routines",".do file","stata","spss","r studio","python","automation","data collection","aggregation","script","routine","openbb terminal","tasks","processes"]},sidebar:"tutorialSidebar",previous:{title:"Exporting & Importing Datasets",permalink:"/terminal/usage/guides/data"},next:{title:"Customization",permalink:"/terminal/usage/guides/customizing-the-terminal"}},p={},d=[{value:"Introduction",id:"introduction",level:2},{value:"The Macro Recorder",id:"the-macro-recorder",level:2},{value:"Basic Script",id:"basic-script",level:2},{value:"Creating and Running a Routine Script",id:"creating-and-running-a-routine-script",level:2},{value:"Input Variables",id:"input-variables",level:2},{value:"Set Variables",id:"set-variables",level:2},{value:"Relative Time Kewyword Variables",id:"relative-time-kewyword-variables",level:2},{value:"Foreach Loop",id:"foreach-loop",level:2}],c={toc:d},u="wrapper";function m(e){let{components:t,...n}=e;return(0,i.kt)(u,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)(r.Z,{title:"Scripts & Routines - Terminal | OpenBB Docs",mdxType:"HeadTitle"}),(0,i.kt)("p",null,"OpenBB Routine Scripts allow users to write simple scripts for automating processes and repetitive tasks. In essence these are text plain-text files that can be created or modified in any basic text editor with the only difference of having an ",(0,i.kt)("inlineCode",{parentName:"p"},".openbb")," extension."),(0,i.kt)("p",null,"Other software like STATA, SPSS and R-Studio share similar functionality in the area of Econometrics and the OpenBB routine scripts venture into the area of financial analysis and data collection to speed up the process."),(0,i.kt)("p",null,"For example, not only is it possible to automate a set of functionality, it is also possible to export a large amount of data to Excel through the usage of ",(0,i.kt)("inlineCode",{parentName:"p"},"--export")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"--sheet-name")," making data collection efficient, reproducible and customizable."),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"Run a routine file from the main menu, with the ",(0,i.kt)("inlineCode",{parentName:"p"},"exe")," command. A great start would be to use ",(0,i.kt)("inlineCode",{parentName:"p"},"exe --example")," to get a sense of what this functionality does. Below, the ",(0,i.kt)("inlineCode",{parentName:"p"},"--help")," dialogue is displayed."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"usage: exe [--file PATH] [-i ROUTINE_ARGS] [-e] [-h]\n\nExecute automated routine script. For an example, please use `exe --example` and for documentation and to learn how create your own script type `about exe`.\n\noptions:\n  --file PATH           The path or .openbb file to run. (default: None)\n  -i ROUTINE_ARGS, --input ROUTINE_ARGS\n                        Select multiple inputs to be replaced in the routine and separated by commas. E.g. GME,AMC,BTC-USD (default: None)\n  -e, --example         Run an example script to understand how routines can be used. (default: False)\n  -h, --help            show this help message (default: False)\n")),(0,i.kt)("h2",{id:"the-macro-recorder"},"The Macro Recorder"),(0,i.kt)("p",null,"OpenBB script routines can be captured with the macro recorder, controlled with global commands, ",(0,i.kt)("inlineCode",{parentName:"p"},"record")," to start saving commands and ",(0,i.kt)("inlineCode",{parentName:"p"},"stop")," to terminate the recording. This shares similarities with that of Excel's VBA methods. This means that any command you run will be automatically recorded for the routine script and once you type ",(0,i.kt)("inlineCode",{parentName:"p"},"stop")," it automatically saves the file to the ",(0,i.kt)("inlineCode",{parentName:"p"},"~/OpenBBUserData/routines/")," folder."),(0,i.kt)("p",null,"For example, if you copy and paste the following prompt in the OpenBB Terminal and press enter, you will see an example."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"$ /record/economy/cpi/treasury/index sp500/stop\n")),(0,i.kt)("p",null,"The following shows the output from this pipeline of commands."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/46355364/223204998-70d9e5da-f84e-4c22-90c4-576dcf87c1df.png",alt:"Routines"})),(0,i.kt)("p",null,"Because there was a ",(0,i.kt)("inlineCode",{parentName:"p"},"record")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"stop")," at the ",(0,i.kt)("inlineCode",{parentName:"p"},"start")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"end")," respectively, a routine script was created. This file cane be found inside the ",(0,i.kt)("inlineCode",{parentName:"p"},"routines")," folder within the ",(0,i.kt)("inlineCode",{parentName:"p"},"OpenBBUserData")," folder (more on exporting and import data ",(0,i.kt)("a",{parentName:"p",href:"https://docs.openbb.co/terminal/usage/guides/data"},"here"),")."),(0,i.kt)("p",null,"Now, you should be able to access the routine file from the terminal main menu by doing ",(0,i.kt)("inlineCode",{parentName:"p"},"/exe --file")," and using the auto-completer. Note that the naming of the file will differ for you based on the time you are executing the script."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/46355364/223205394-77e7a33d-e9fa-4686-b32f-e8d183b265e6.png",alt:"Routines"})),(0,i.kt)("h2",{id:"basic-script"},"Basic Script"),(0,i.kt)("p",null,"The most basic script style contains 2 main elements:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Comments"),": any text after a hashtag (",(0,i.kt)("inlineCode",{parentName:"li"},"#"),") is referred to as a comment. This is used to explain what is happening within the line below and is ignored when the file is executed."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Commands"),": any text ",(0,i.kt)("em",{parentName:"li"},"without")," a hashtag is being ran inside the OpenBB Terminal as if the user had prompted that line in the terminal. Note that this means that you are able to create a pipeline of commands in a single line, i.e. ",(0,i.kt)("inlineCode",{parentName:"li"},"stocks/load AAPL/candle --ma 20")," is a valid line for the script.")),(0,i.kt)("p",null,"For instance, the text below corresponds to the example file that OpenBB provides."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"# Go into the stocks context\nstocks\n\n# Load a company ticker, e.g. Apple\nload AAPL\n\n# Show a candle chart with a 20 day Moving Average\ncandle --ma 20\n\n# Switch over to the Fundamental Analysis menu\nfa\n\n# Show Earnings per Share (EPS) estimates\nepsfc\n\n# Show price targets charts\npt\n\n# Show future estimations\nest\n\n# Return to home\nhome\n")),(0,i.kt)("h2",{id:"creating-and-running-a-routine-script"},"Creating and Running a Routine Script"),(0,i.kt)("p",null,"As a starting point, let's use the example above."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Create a new text file with name ",(0,i.kt)("inlineCode",{parentName:"li"},"routines_template.openbb")," and copy paste the routine above. For simplicity you can also download the template file ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("a",{parentName:"strong",href:"https://www.dropbox.com/s/73g9qx9xgtbb2ec/routines_template.openbb?dl=1"},"here")),"."),(0,i.kt)("li",{parentName:"ol"},"Move the file inside the ",(0,i.kt)("inlineCode",{parentName:"li"},"routines")," folder within the ",(0,i.kt)("a",{parentName:"li",href:"https://docs.openbb.co/terminal/usage/guides/data"},"OpenBBUserData")," folder and, optionally, adjust the name to your liking."),(0,i.kt)("li",{parentName:"ol"},"Open up the OpenBB Terminal, and type ",(0,i.kt)("inlineCode",{parentName:"li"},"exe --file routines_template"),". If you changed the name of the file, then replace ",(0,i.kt)("inlineCode",{parentName:"li"},"routines_template")," by such. As long as the file remains in the ",(0,i.kt)("inlineCode",{parentName:"li"},"routines")," folder, you will be able to find your file through OpenBB Terminal's auto-completer capability.")),(0,i.kt)("p",null,"Now you should expect the contents of the example above to be run. This means that a candle chart with a moving average of 20 days, expectations and price targets from analysts and estimated future performance should pop up before returning to the home window."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/46355364/223207167-dfab3a74-d34d-47d4-bf6e-44944e8fbfa2.png",alt:"OpenBB Routine Script Execution"})),(0,i.kt)("h2",{id:"input-variables"},"Input Variables"),(0,i.kt)("p",null,"The previous example shows the promise of this language. However, it would be exhausting to have to create one file per ticker of interest. And this is why we allow the user to create arguments within a script that will be populated at the time of execution, which provides a more efficient experience."),(0,i.kt)("p",null,"As an example, let's look into the following routine (the file can be downloaded ",(0,i.kt)("a",{parentName:"p",href:"https://www.dropbox.com/s/usooz6y29r1xldb/routines_template_with_inputs.openbb?dl=1"},"here"),"):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"# This script requires you to use arguments. This can be done with the following:\n# exe --file routines_template_with_inputs.openbb -i TSLA,AAPL,MSFT\n\n# Go to the stocks menu\nstocks\n\n# Load a ticker, given the argument used. E.g. -i TSLA\nload $ARGV[0]\n\n# Enter the Technical Analysis (ta) menu\nta\n\n# Show the fibonacci retracement levels\nfib\n\n# Enter the comparison analysis (ca) menu\n../ca\n\n# Set two extra tickers based on the arguments used. E.g. -i TSLA,AAPL,MSFT\nadd $ARGV[1],$ARGV[2]\n\n# Plot the historical prices\nhistorical\n\n# Return to home\nhome\n")),(0,i.kt)("p",null,"This script includes ",(0,i.kt)("inlineCode",{parentName:"p"},"$ARGV[0]"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"$ARGV[1]")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"$ARGV[2]"),". This means that the script requires you to submit three arguments. In this case, they refer to ",(0,i.kt)("a",{href:"https://www.investopedia.com/ask/answers/12/what-is-a-stock-ticker.asp",target:"_blank",rel:"noreferrer noopener"},"stock tickers"),". Therefore, like the script also says, you can include these arguments with ",(0,i.kt)("inlineCode",{parentName:"p"},"-i")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"--input")," followed by three tickers (e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"/exe routines_template_with_inputs.openbb -i TSLA,AAPL,MSFT"),"). Resulting in the following,"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/46355364/223207706-42995834-577f-4747-8185-42a016f441d9.png",alt:"OpenBB Script with Input"})),(0,i.kt)("p",null,"Note: Make sure you saved this script in the ",(0,i.kt)("inlineCode",{parentName:"p"},"~/OpenBBUserData/routines/")," folder else you are not able to execute it."),(0,i.kt)("h2",{id:"set-variables"},"Set Variables"),(0,i.kt)("p",null,"In addition, OpenBB accepts the creation of variables inside the script. This can be useful when the user utilizes a ticker as a benchmark/reference, and therefore instead of having to change the ticker of interest in multiple places they can just change the variable. Example of script below:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"# Set date variable\n$DATE = 2022-01-01\n\n# Set list of tickers to iterate\n$TICKERS = AAPL,MSFT\n\n# dive into stocks\nstocks\n\n# candle chart for first ticker\nload $TICKERS[0] --start $DATE/candle\n\n# candle chart for second ticker\nload $TICKERS[1] --start $DATE[0]/candle\n")),(0,i.kt)("p",null,"Note that a variable can be declared as a single argument ",(0,i.kt)("inlineCode",{parentName:"p"},"$DATE = 2022-01-01")," but it can also be declared as a list ",(0,i.kt)("inlineCode",{parentName:"p"},"$TICKERS = AAPL,MSFT"),"."),(0,i.kt)("p",null,"When declared as a list, the user needs to use the indexing to access the element of interest, i.e. if interested in ",(0,i.kt)("inlineCode",{parentName:"p"},"MSFT")," then ",(0,i.kt)("inlineCode",{parentName:"p"},"$TICKERS[1]")," should be used."),(0,i.kt)("p",null,"When a single element is defined, then the user can access it through the variable name or indexing the first position equally, i.e. ",(0,i.kt)("inlineCode",{parentName:"p"},"$DATE")," = ",(0,i.kt)("inlineCode",{parentName:"p"},"$DATE[0]"),"."),(0,i.kt)("p",null,"Note that slicing is also possible, and the same convention as python is utilized. If the user has defined inputs ",(0,i.kt)("inlineCode",{parentName:"p"},"AAPL,MSFT,TSLA,NVDA,GOOG")," then by selecting ",(0,i.kt)("inlineCode",{parentName:"p"},"$ARGV[1:3]")," the tickers ",(0,i.kt)("inlineCode",{parentName:"p"},"MSFT,TSLA")," are selected."),(0,i.kt)("h2",{id:"relative-time-kewyword-variables"},"Relative Time Kewyword Variables"),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("strong",{parentName:"p"},"This functionality requires OpenBB V 3.1.0 or later."))),(0,i.kt)("p",null,"The previous input variables are very powerful and can be used for a wide range of functionalities - one of them being dates. E.g. a typical example could be running a script routine with ",(0,i.kt)("inlineCode",{parentName:"p"},"exe myscript -i TSLA,2010-01-01")," where ",(0,i.kt)("inlineCode",{parentName:"p"},"$ARGV[1]=2010-01-01")," and thus it denotes an instant of time."),(0,i.kt)("p",null,"However, what if instead of wanting an absolute date we want a relative date? The OpenBB scripts now have the capability to recognize these. There are 4 main types of keywords:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"AGO")," - this corresponds to a time in the past relative to today. Valid examples are: ",(0,i.kt)("inlineCode",{parentName:"p"},"$365DAYSAGO"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"$12MONTHSAGO"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"$1YEARSAGO"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"FROMNOW")," - this corresponds to a time in the future relative to today. Valid examples are: ",(0,i.kt)("inlineCode",{parentName:"p"},"$365DAYSFROMNOW"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"$12MONTHSFROMNOW"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"$1YEARSFROMNOW"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"LAST")," - this refers to the last specific day of the week or month that has occurred. Valid examples are: ",(0,i.kt)("inlineCode",{parentName:"p"},"$LASTMONDAY"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"$LASTJUNE"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"NEXT")," - this refers to the next specific day of the week or month that will occur. Valid examples are: ",(0,i.kt)("inlineCode",{parentName:"p"},"$NEXTFRIDAY"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"$NEXTNOVEMBER"),"."))),(0,i.kt)("p",null,"The result will be a date with the conventional date associated with OpenBB, i.e. ",(0,i.kt)("inlineCode",{parentName:"p"},"YYYY-MM-dd"),"."),(0,i.kt)("h2",{id:"foreach-loop"},"Foreach Loop"),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("strong",{parentName:"p"},"This functionality requires OpenBB V 3.1.0 or later."))),(0,i.kt)("p",null,"To be a powerful scripting language, we needed to introduce the concept of foreach loops. These allows to iterate through a list of variables / arguments to execute a sequence commands."),(0,i.kt)("p",null,"In order to create a foreach loop all you need to do is:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Create the header ",(0,i.kt)("inlineCode",{parentName:"p"},"foreach $$VAR in X")," where ",(0,i.kt)("inlineCode",{parentName:"p"},"X")," can be an argument or a list of variables. Note that the ",(0,i.kt)("inlineCode",{parentName:"p"},"$$VAR")," can take other naming as long as the ",(0,i.kt)("inlineCode",{parentName:"p"},"$$")," convention is kept.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Insert commands you are interested in repeating in the following lines")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Finish with a ",(0,i.kt)("inlineCode",{parentName:"p"},"end"),"."))),(0,i.kt)("p",null,"Some valid examples are shown below as reference"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"# Iterates through ARGV elements from position 1 onwards\nforeach $$VAR in $ARGV[1:]\n    load $$VAR --start $DATES[0] --end $DATES[1]/dps/psi/..\nend\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"# Loops through all $ARGV variables\nFOREACH $$SOMETHING in $ARGV\n    load $$SOMETHING --start $DATE[0]/ins/stats/..\n end\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"# Iterates through ARGV elements in position 1,2\nforeach $$VAR in $ARGV[1:3]\n    load $$VAR --start 2022-01-01\n    ba\n    regions\n    ..\nEND\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"# Loops through PLTR and BB\nforeach $$X in PLTR,BB\n    load $$X --start $LASTJANUARY\n    candle\nEND\n")))}m.isMDXComponent=!0}}]);