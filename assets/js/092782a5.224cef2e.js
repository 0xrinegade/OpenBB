"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[85750],{3905:(e,t,r)=>{r.d(t,{Zo:()=>s,kt:()=>h});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=a.createContext({}),p=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},s=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,s=d(e,["components","mdxType","originalType","parentName"]),u=p(r),m=n,h=u["".concat(l,".").concat(m)]||u[m]||c[m]||i;return r?a.createElement(h,o(o({ref:t},s),{},{components:r})):a.createElement(h,o({ref:t},s))}));function h(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,o=new Array(i);o[0]=m;var d={};for(var l in t)hasOwnProperty.call(t,l)&&(d[l]=t[l]);d.originalType=e,d[u]="string"==typeof e?e:n,o[1]=d;for(var p=2;p<i;p++)o[p]=r[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},88828:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(67294),n=r(35742);function i(e){let{title:t}=e;return a.createElement(n.Z,null,a.createElement("title",null,t))}},41588:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>d,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var a=r(87462),n=(r(67294),r(3905)),i=r(88828);const o={title:"Add a Data Point",sidebar_position:3,description:"This guide provides detailed instructions on how to add a new data point to the OpenBB Platform. It covers the process of creating a new provider, defining query parameters and data output models, and building a Fetcher class.",keywords:["OpenBB Platform","Data point addition","Provider creation","Query parameters","Data output models","Fetcher class"]},d=void 0,l={unversionedId:"platform/development/developer-guidelines/add_data_point",id:"platform/development/developer-guidelines/add_data_point",title:"Add a Data Point",description:"This guide provides detailed instructions on how to add a new data point to the OpenBB Platform. It covers the process of creating a new provider, defining query parameters and data output models, and building a Fetcher class.",source:"@site/content/platform/development/developer-guidelines/add_data_point.md",sourceDirName:"platform/development/developer-guidelines",slug:"/platform/development/developer-guidelines/add_data_point",permalink:"/platform/development/developer-guidelines/add_data_point",draft:!1,editUrl:"https://github.com/OpenBB-finance/OpenBBTerminal/edit/main/website/content/platform/development/developer-guidelines/add_data_point.md",tags:[],version:"current",lastUpdatedBy:"DidierRLopes",lastUpdatedAt:1701304467,formattedLastUpdatedAt:"Nov 30, 2023",sidebarPosition:3,frontMatter:{title:"Add a Data Point",sidebar_position:3,description:"This guide provides detailed instructions on how to add a new data point to the OpenBB Platform. It covers the process of creating a new provider, defining query parameters and data output models, and building a Fetcher class.",keywords:["OpenBB Platform","Data point addition","Provider creation","Query parameters","Data output models","Fetcher class"]},sidebar:"tutorialSidebar",previous:{title:"Building Extensions for OpenBB Platform",permalink:"/platform/development/developer-guidelines/build_openbb_extensions"},next:{title:"Add Custom Data Sources",permalink:"/platform/development/developer-guidelines/add_custom_data_sources"}},p={},s=[{value:"Identify which type of data you want to add",id:"identify-which-type-of-data-you-want-to-add",level:2},{value:"Check if the standard model exists",id:"check-if-the-standard-model-exists",level:2},{value:"Create Query Parameters model",id:"create-query-parameters-model",level:3},{value:"Create Data Output model",id:"create-data-output-model",level:3},{value:"Build the Fetcher",id:"build-the-fetcher",level:3},{value:"Make the provider visible",id:"make-the-provider-visible",level:2}],u={toc:s},c="wrapper";function m(e){let{components:t,...r}=e;return(0,n.kt)(c,(0,a.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)(i.Z,{title:"Add a Data Point - Developer Guidelines - Development | OpenBB Platform Docs",mdxType:"HeadTitle"}),(0,n.kt)("p",null,"In this section, we'll be adding a new data point to the OpenBB Platform. We will add a new provider with an existing ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/OpenBB-finance/OpenBBTerminal/tree/develop/openbb_platform/core/provider/standard_models"},"standard data")," model."),(0,n.kt)("h2",{id:"identify-which-type-of-data-you-want-to-add"},"Identify which type of data you want to add"),(0,n.kt)("p",null,"In this example, we'll be adding OHLC stock data that is used by the ",(0,n.kt)("inlineCode",{parentName:"p"},"obb.equity.price.historical")," command."),(0,n.kt)("p",null,"Note that, if no command exists for your data, we need to add one under the right router.\nEach router is categorized under different extensions (stocks, currency, crypto, etc.)."),(0,n.kt)("h2",{id:"check-if-the-standard-model-exists"},"Check if the standard model exists"),(0,n.kt)("p",null,"Given the fact that there's already an endpoint for OHLCV stock data, we can check if the standard exists."),(0,n.kt)("p",null,"In this case, it's ",(0,n.kt)("inlineCode",{parentName:"p"},"EquityHistorical")," which can be found in ",(0,n.kt)("inlineCode",{parentName:"p"},"/OpenBBTerminal/openbb_platform/core/provider/standard_models/equity_historical"),"."),(0,n.kt)("p",null,"If the standard model doesn't exist:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"you won't need to inherit from it in the next steps."),(0,n.kt)("li",{parentName:"ul"},"all your provider query parameters will be under the ",(0,n.kt)("inlineCode",{parentName:"li"},"**kwargs")," in the python interface."),(0,n.kt)("li",{parentName:"ul"},"it might not work out-of-the box with other extensions that follow standardization e.g. the ",(0,n.kt)("inlineCode",{parentName:"li"},"charting")," extension")),(0,n.kt)("h3",{id:"create-query-parameters-model"},"Create Query Parameters model"),(0,n.kt)("p",null,"Query Parameters are the parameters that are passed to the API endpoint in order to make the request."),(0,n.kt)("p",null,"For the ",(0,n.kt)("inlineCode",{parentName:"p"},"EquityHistorical")," example, this would look like the following:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'\nclass <ProviderName>EquityHistoricalQueryParams(EquityHistoricalQueryParams):\n    """<ProviderName> Equity Historical Query.\n\n    Source: https://www.<provider_name>.co/documentation/\n    """\n\n    # provider specific query parameters if any\n\n')),(0,n.kt)("h3",{id:"create-data-output-model"},"Create Data Output model"),(0,n.kt)("p",null,"The data output is the data that is returned by the API endpoint.\nFor the ",(0,n.kt)("inlineCode",{parentName:"p"},"StockHistorical")," example, this would look like the following:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'\nclass <ProviderName>EquityHistoricalData(EquityHistoricalData):\n    """<ProviderName> Equity Historical Data.\n\n    Source: https://www.<provider_name>.co/documentation/\n    """\n\n    # provider specific data output fields if any\n\n')),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Note that, since ",(0,n.kt)("inlineCode",{parentName:"p"},"EquityHistoricalData")," inherits from pydantic's ",(0,n.kt)("inlineCode",{parentName:"p"},"BaseModel"),", we can leverage validators to perform additional checks on the output model. A very good example of this, would be to transform a string date into a datetime object.")),(0,n.kt)("h3",{id:"build-the-fetcher"},"Build the Fetcher"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"Fetcher")," class is responsible for making the request to the API endpoint and providing the output."),(0,n.kt)("p",null,"It will receive the Query Parameters, and it will return the output while leveraging the pydantic model schemas."),(0,n.kt)("p",null,"For the ",(0,n.kt)("inlineCode",{parentName:"p"},"EquityHistorical")," example, this would look like the following:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'class <ProviderName>EquityHistoricalFetcher(\n    Fetcher[\n        <ProviderName>EquityHistoricalQueryParams,\n        List[<ProviderName>EquityHistoricalData],\n    ]\n):\n    """Transform the query, extract and transform the data."""\n\n    @staticmethod\n    def transform_query(params: Dict[str, Any]) -> <ProviderName>EquityHistoricalQueryParams:\n        """Transform the query parameters."""\n\n        return <ProviderName>EquityHistoricalQueryParams(**transformed_params)\n\n    @staticmethod\n    def extract_data(\n        query: <ProviderName>EquityHistoricalQueryParams,\n        credentials: Optional[Dict[str, str]],\n        **kwargs: Any,\n    ) -> dict:\n        """Return the raw data from the endpoint."""\n\n        obtained_data = my_request(query, credentials, **kwargs)\n\n        return obtained_data\n\n    @staticmethod\n    def transform_data(\n        data: dict,\n    ) -> List[<ProviderName>EquityHistoricalData]:\n        """Transform the data to the standard format."""\n\n        return [<ProviderName>EquityHistoricalData.model_validate(d) for d in data]\n')),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Make sure that you're following the TET pattern when building a ",(0,n.kt)("inlineCode",{parentName:"p"},"Fetcher")," - ",(0,n.kt)("strong",{parentName:"p"},"Transform, Extract, Transform"),". See more on this ",(0,n.kt)("a",{parentName:"p",href:"/platform/contributing/developer-guidelines/architectural_considerations#the-tet-pattern"},"here"),".")),(0,n.kt)("h2",{id:"make-the-provider-visible"},"Make the provider visible"),(0,n.kt)("p",null,"In order to make the new provider visible to the OpenBB Platform, you'll need to add it to the ",(0,n.kt)("inlineCode",{parentName:"p"},"__init__.py")," file of the ",(0,n.kt)("inlineCode",{parentName:"p"},"providers/<provider_name>/openbb_<provider_name>/")," folder."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'"""<Provider Name> Provider module."""\nfrom openbb_core.provider.abstract.provider import Provider\n\nfrom openbb_<provider_name>.models.equity_historical import <ProviderName>EquityHistoricalFetcher\n\n<provider_name>_provider = Provider(\n    name="<provider_name>",\n    website="<URL to the provider website>",\n    description="Provider description goes here",\n    credentials=["api_key"],\n    fetcher_dict={\n        "EquityHistorical": <ProviderName>EquityHistoricalFetcher,\n    },\n)\n')),(0,n.kt)("p",null,"If the provider does not require any credentials, you can remove that parameter. On the other hand, if it requires more than 2 items to authenticate, you can add a list of all the required items to the ",(0,n.kt)("inlineCode",{parentName:"p"},"credentials")," list."),(0,n.kt)("p",null,"After running ",(0,n.kt)("inlineCode",{parentName:"p"},"pip install .")," on ",(0,n.kt)("inlineCode",{parentName:"p"},"openbb_platform/providers/<provider_name>")," your provider should be ready for usage, both from the Python interface and the API."))}m.isMDXComponent=!0}}]);